<!--
  增强版 EffectCards
  支持更多交互和配置
-->
<view class="container">
  <!-- 配置面板 -->
  <view class="config-panel">
    <view class="config-item">
      <text class="config-label">偏移量: {{perSlideOffset}}rpx</text>
      <slider
        min="0"
        max="20"
        value="{{perSlideOffset}}"
        bindchange="onOffsetChange"
        activeColor="#667eea"
      />
    </view>
    <view class="config-item">
      <text class="config-label">旋转角度: {{perSlideRotate}}°</text>
      <slider
        min="0"
        max="10"
        value="{{perSlideRotate}}"
        bindchange="onRotateChange"
        activeColor="#667eea"
      />
    </view>
  </view>

  <!-- 卡片容器 -->
  <view class="cards-wrapper">
    <view
      class="card-item {{index === currentIndex ? 'active' : ''}}"
      wx:for="{{cards}}"
      wx:key="id"
      style="{{item.style}}"
      catchtouchstart="onTouchStart"
      catchtouchmove="onTouchMove"
      catchtouchend="onTouchEnd"
      catchtap="onCardTap"
      data-index="{{index}}"
    >
      <!-- 卡片内容 -->
      <view class="card-content" style="background: {{item.gradient}}">
        <view class="card-header">
          <text class="card-title">{{item.title}}</text>
        </view>
        <view class="card-body">
          <image class="card-icon" src="{{item.icon}}" mode="aspectFit" />
          <text class="card-description">{{item.description}}</text>
        </view>
        <view class="card-footer">
          <text class="card-number">{{index + 1}}/{{cards.length}}</text>
        </view>
      </view>

      <!-- 卡片阴影 -->
      <view class="card-shadow" style="{{item.shadowStyle}}"></view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="controls">
    <button
      class="control-btn"
      bindtap="prevCard"
      disabled="{{currentIndex === 0}}"
    >
      上一张
    </button>
    <button class="control-btn primary" bindtap="resetCards">
      重置
    </button>
    <button
      class="control-btn"
      bindtap="nextCard"
      disabled="{{currentIndex === cards.length - 1}}"
    >
      下一张
    </button>
  </view>

  <!-- 指示器 -->
  <view class="indicators">
    <view
      wx:for="{{cards}}"
      wx:key="id"
      class="indicator-dot {{index === currentIndex ? 'active' : ''}}"
      bindtap="switchToCard"
      data-index="{{index}}"
    ></view>
  </view>
</view>
