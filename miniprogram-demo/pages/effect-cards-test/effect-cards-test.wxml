<!--
  perSlideRotate æ•ˆæœæµ‹è¯•é¡µé¢
  å¯¹æ¯”ä¸åŒ perSlideRotate å€¼çš„è§†è§‰æ•ˆæœ
-->
<view class="container">

  <!-- å¡ç‰‡å®¹å™¨ -->
  <view class="cards-wrapper" style="height: {{cardHeight}}rpx;">
    <!-- å·¦ä¾§æŒ‰é’®ï¼šä¸Šä¸€å¼  -->
    <view wx:if="{{currentIndex > 0}}" class="nav-btn nav-btn-left" bindtap="gotoPrev"></view>

    <view
      class="card-item {{index === currentIndex ? 'active' : ''}}"
      wx:for="{{cards}}"
      wx:key="id"
      style="{{item.style}}; width: {{cardWidth}}rpx; height: {{cardHeight}}rpx; left: 50%; top: 50%; margin-left: -{{cardWidth/2}}rpx; margin-top: -{{cardHeight/2}}rpx;"
      catchtouchstart="onTouchStart"
      catchtouchmove="onTouchMove"
      catchtouchend="onTouchEnd"
      data-index="{{index}}"
    >
      <view class="card-content" style="background: {{item.gradient}}">
        <view class="card-title-area">
          <text class="card-number">{{index + 1}}</text>
        </view>
        <view class="card-body-area">
          <text class="card-angle">æ—‹è½¬: {{item.rotateAngle}}Â°</text>
          <text class="card-offset">åç§»: {{item.offsetValue}}rpx</text>
        </view>
      </view>
      <view wx:if="{{shadow}}" class="card-shadow" style="{{item.shadowStyle}}"></view>
    </view>

    <!-- å³ä¾§æŒ‰é’®ï¼šä¸‹ä¸€å¼  -->
    <view wx:if="{{currentIndex < cards.length - 1}}" class="nav-btn nav-btn-right" bindtap="gotoNext"></view>
  </view>

  <view class="header">
    <text class="title">perSlideRotate æ•ˆæœå¯¹æ¯”</text>
    <text class="subtitle">å®æ—¶è°ƒæ•´æ—‹è½¬è§’åº¦ï¼ŒæŸ¥çœ‹æ•ˆæœå˜åŒ–</text>
  </view>

  <!-- å½“å‰é…ç½®æ˜¾ç¤º -->
  <view class="config-display">
    <view class="config-row">
      <text class="label">perSlideRotate:</text>
      <text class="value">{{perSlideRotate}}Â°</text>
    </view>
    <view class="config-row">
      <text class="label">perSlideOffset:</text>
      <text class="value">{{perSlideOffset}}rpx</text>
    </view>
    <view class="config-row">
      <text class="label">å½“å‰å¡ç‰‡:</text>
      <text class="value">{{currentIndex + 1}}/{{cards.length}}</text>
    </view>
    <view class="config-row">
      <text class="label">å¯è§æ•°é‡:</text>
      <text class="value">{{maxVisibleCards}}</text>
    </view>
    <view class="config-row">
      <text class="label">å¡ç‰‡å°ºå¯¸:</text>
      <text class="value">{{cardWidth}}Ã—{{cardHeight}}</text>
    </view>
  </view>

  <!-- æ—‹è½¬è§’åº¦è°ƒæ•´ -->
  <view class="slider-panel">
    <text class="slider-label">æ—‹è½¬è§’åº¦ (perSlideRotate)</text>
    <view class="slider-container">
      <text class="slider-value">0Â°</text>
      <slider
        class="slider"
        min="0"
        max="20"
        step="1"
        value="{{perSlideRotate}}"
        bindchange="onRotateChange"
        bindchanging="onRotateChanging"
        activeColor="#667eea"
        backgroundColor="#e0e0e0"
        block-size="28"
      />
      <text class="slider-value">20Â°</text>
    </view>
  </view>

  <!-- åç§»é‡è°ƒæ•´ -->
  <view class="slider-panel">
    <text class="slider-label">åç§»é‡ (perSlideOffset)</text>
    <view class="slider-container">
      <text class="slider-value">0</text>
      <slider
        class="slider"
        min="0"
        max="30"
        step="1"
        value="{{perSlideOffset}}"
        bindchange="onOffsetChange"
        bindchanging="onOffsetChanging"
        activeColor="#764ba2"
        backgroundColor="#e0e0e0"
        block-size="28"
      />
      <text class="slider-value">30</text>
    </view>
  </view>

  <!-- å¯è§å¡ç‰‡æ•°é‡è°ƒæ•´ -->
  <view class="slider-panel">
    <text class="slider-label">å¯è§å¡ç‰‡æ•°é‡ (maxVisibleCards)</text>
    <view class="slider-container">
      <text class="slider-value">1</text>
      <slider
        class="slider"
        min="1"
        max="5"
        step="1"
        value="{{maxVisibleCards}}"
        bindchange="onMaxVisibleCardsChange"
        bindchanging="onMaxVisibleCardsChanging"
        activeColor="#43e97b"
        backgroundColor="#e0e0e0"
        block-size="28"
      />
      <text class="slider-value">5</text>
    </view>
  </view>

  <!-- å¡ç‰‡å°ºå¯¸è°ƒæ•´ -->
  <view class="slider-panel">
    <text class="slider-label">å¡ç‰‡å°ºå¯¸</text>
    <view class="input-row">
      <view class="input-group">
        <text class="input-label">å®½åº¦ (rpx)</text>
        <input
          class="size-input"
          type="number"
          value="{{cardWidth}}"
          bindinput="onCardWidthInput"
          bindblur="onCardSizeBlur"
        />
      </view>
      <view class="input-group">
        <text class="input-label">é«˜åº¦ (rpx)</text>
        <input
          class="size-input"
          type="number"
          value="{{cardHeight}}"
          bindinput="onCardHeightInput"
          bindblur="onCardSizeBlur"
        />
      </view>
    </view>
  </view>

  <!-- é˜´å½±å¼€å…³ -->
  <view class="slider-panel">
    <view class="switch-row">
      <text class="slider-label">é˜´å½±æ•ˆæœ (shadow)</text>
      <switch
        checked="{{shadow}}"
        bindchange="onShadowChange"
        color="#667eea"
      />
    </view>
  </view>

  <!-- æ—‹è½¬åŸºå‡†ç‚¹é€‰æ‹© -->
  <view class="slider-panel">
    <text class="slider-label">æ—‹è½¬åŸºå‡†ç‚¹ (transform-origin)</text>
    <view class="origin-buttons">
      <button
        class="origin-btn {{transformOrigin === 'center top' ? 'active' : ''}}"
        bindtap="setOrigin"
        data-origin="center top"
      >
        é¡¶éƒ¨
      </button>
      <button
        class="origin-btn {{transformOrigin === 'center center' ? 'active' : ''}}"
        bindtap="setOrigin"
        data-origin="center center"
      >
        ä¸­å¿ƒ
      </button>
      <button
        class="origin-btn {{transformOrigin === 'center bottom' ? 'active' : ''}}"
        bindtap="setOrigin"
        data-origin="center bottom"
      >
        åº•éƒ¨
      </button>
    </view>
  </view>

  <!-- é¢„è®¾å€¼å¿«æ·æŒ‰é’® -->
  <view class="presets">
    <text class="presets-title">å¿«é€Ÿé¢„è®¾</text>
    <view class="preset-buttons">
      <button
        class="preset-btn {{perSlideRotate === 0 ? 'active' : ''}}"
        bindtap="setPreset"
        data-rotate="0"
        data-offset="8"
      >
        æ— æ—‹è½¬
      </button>
      <button
        class="preset-btn {{perSlideRotate === 2 ? 'active' : ''}}"
        bindtap="setPreset"
        data-rotate="2"
        data-offset="8"
      >
        é»˜è®¤ (2Â°)
      </button>
      <button
        class="preset-btn {{perSlideRotate === 5 ? 'active' : ''}}"
        bindtap="setPreset"
        data-rotate="5"
        data-offset="10"
      >
        ä¸­ç­‰ (5Â°)
      </button>
      <button
        class="preset-btn {{perSlideRotate === 10 ? 'active' : ''}}"
        bindtap="setPreset"
        data-rotate="10"
        data-offset="15"
      >
        å¼ºçƒˆ (10Â°)
      </button>
      <button
        class="preset-btn {{perSlideRotate === 15 ? 'active' : ''}}"
        bindtap="setPreset"
        data-rotate="15"
        data-offset="20"
      >
        æé™ (15Â°)
      </button>
    </view>
  </view>

  <!-- è¯´æ˜æ–‡å­— -->
  <view class="description">
    <text class="desc-title">ğŸ’¡ è¯´æ˜</text>
    <text class="desc-text">â€¢ perSlideRotate æ§åˆ¶æ¯å¼ å¡ç‰‡çš„æ—‹è½¬è§’åº¦</text>
    <text class="desc-text">â€¢ progress = -1 æ—¶ï¼Œrotate = +perSlideRotate</text>
    <text class="desc-text">â€¢ progress = +1 æ—¶ï¼Œrotate = -perSlideRotate</text>
    <text class="desc-text">â€¢ æ—‹è½¬åŸºå‡†ç‚¹é»˜è®¤åœ¨åº•éƒ¨ï¼Œå¯åˆ‡æ¢ä¸ºé¡¶éƒ¨æˆ–ä¸­å¿ƒ</text>
    <text class="desc-text">â€¢ åº•éƒ¨æ—‹è½¬ï¼šå¡ç‰‡åƒæ‰‡å­ä¸€æ ·ä»åº•éƒ¨å±•å¼€</text>
    <text class="desc-text">â€¢ ä¸ Swiper Web ç‰ˆå®ç°å®Œå…¨ä¸€è‡´</text>
  </view>
</view>
